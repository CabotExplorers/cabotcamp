<Directory /srv/wayoutwest>
Require all denied

<Files "run.wsgi">
Require all granted
</Files>
</Directory>

<Directory /srv/wayoutwest/site/app/static>
Require all granted
</Directory>

<Directory /srv/wayoutwest/livestream/dist>
Require all granted
</Directory>

<VirtualHost *:80>
ServerName camp.cabotscouts.org.uk
ServerAlias camp.cabotexplorers.org.uk

RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>

<VirtualHost *:443>
ServerName camp.cabotscouts.org.uk
ServerAlias camp.cabotexplorers.org.uk

Include /etc/httpd/conf.d/includes/ssl-mozillla.conf
SSLCertificateFile /etc/letsencrypt/live/camp.cabotexplorers.org.uk/fullchain.pem
SSLCertificateKeyFile /etc/letsencrypt/live/camp.cabotexplorers.org.uk/privkey.pem

Alias /static /srv/wayoutwest/site/app/static
Alias /_ls /srv/wayoutwest/livestream/dist
WSGIScriptAlias / /srv/wayoutwest/site/run.wsgi

WSGIDaemonProcess wayoutwest \
			  user=wayoutwest \
			  group=wayoutwest \
			  processes=5 \
			  threads=10 \
			  home=/srv/wayoutwest/site \
			  python-home=/srv/wayoutwest/site/wayoutwest \
			  display-name='%{GROUP}' \
			  queue-timeout=45 \
			  socket-timeout=60 \
			  connect-timeout=15 \
			  request-timeout=60 \
			  inactivity-timeout=0 \
			  startup-timeout=15 \
			  deadlock-timeout=60 \
			  graceful-timeout=15 \
			  eviction-timeout=0 \
			  restart-interval=0 \
			  shutdown-timeout=5 \
			  maximum-requests=0


WSGIProcessGroup wayoutwest
WSGIApplicationGroup wayoutwest
</VirtualHost>
