{% extends "layouts/admin.jinja" %}
{% block title %}View Share - Admin{% endblock %}
{% block content %}
<h1>Share #{{ share.id }}</h1>
<div class="table-responsive">
  <table class="table">
    <tbody>
      <tr>
        <td scope="row">Submitted by</td>
        <td>{{ share.name }}</td>
      </tr>

      <tr>
        <td scope="row">Group</td>
        <td>{{ share.group.name }}</td>
      </tr>

      <tr>
        <td scope="row">Comment</td>
        <td>{{ share.comment }}</td>
      </tr>

      <tr>
        <td colspan="2">
          {% if share.isImage() %}
          <img class="img img-fluid img-thumbnail" src="{{ url_for("share.get", image=share.file) }}"/>
          {% elif share.isVideo() %}
          <div class="embed-responsive embed-responsive-16by9">
            <video class="embed-responsive-item" controls>
              <source src="{{ url_for("share.get", image=share.file) }}" />
            </video>
          </div>
          {% endif %}
        </td>
      </tr>

      <tr>
        <td scope="row">Type</td>
        <td>{{ share.type }}</td>
      </tr>

      <tr>
        <td scope="row">Submitter IP</td>
        <td>{{ share.ip }}</td>
      </tr>

      <tr>
        <td scope="row">Status</td>
        <td>
          <h4>
            <span class="badge badge-lg badge-{{ share.statusColour }}">
              {{ share.status }}
            </span>
          </h4>
        </td>
      </tr>

      <tr>
        <td colspan="2" class="text-right">
          <div class="row">
            <div class="col-12 col-md mb-2">
              <form method="POST" action="{{ url_for('manage.starShare') }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                <input type="hidden" name="id" value="{{ share.id }}" />
                <button type="submit" class="btn btn-block btn-info">
                  <i class="fas fa-star mr-2"></i>Star
                </button>
              </form>
            </div>

            <div class="col-12 col-md mb-2">
              <form method="POST" action="{{ url_for('manage.approveShare') }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                <input type="hidden" name="id" value="{{ share.id }}" />
                <button type="submit" class="btn btn-block btn-success">
                  <i class="fas fa-check mr-2"></i>Approve
                </button>
              </form>
            </div>
            <div class="col-12 col-md mb-2">
              <form method="POST" action="{{ url_for('manage.flagShare') }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                <input type="hidden" name="id" value="{{ share.id }}" />
                <button type="submit" class="btn btn-block btn-danger">
                  <i class="fas fa-flag mr-2"></i>Flag
                </button>
              </form>
            </div>

            {% if hasAdmin() %}
            <div class="col-12 col-md mb-2">
              <form method="POST" action="{{ url_for('manage.deleteShare') }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                <input type="hidden" name="id" value="{{ share.id }}" />
                <button type="submit" class="btn btn-block btn-dark">
                  <i class="fas fa-times mr-2"></i>Remove
                </button>
              </form>
            </div>
            {% endif %}
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
{% endblock %}
